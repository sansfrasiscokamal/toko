<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Katalog Butang</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <style>
        .grid-container { display: grid; gap: 15px; grid-template-columns: repeat(2, 1fr); }
        @media (min-width: 992px) { .grid-container { grid-template-columns: repeat(5, 1fr); } }
        .product-card { border-radius: 12px; border: 1px solid #eee; overflow: hidden; transition: 0.3s; background: #fff; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        
        /* Gaya Footer */
        footer { border-top: 1px solid #ddd; background: #fff; }
        .sosmed-icon { 
            font-size: 1.8rem; 
            color: #444; 
            transition: 0.3s; 
            text-decoration: none; 
            display: inline-block;
        }
        .sosmed-icon:hover { color: #007bff; transform: scale(1.1); }
        #loadMore { display: none; } /* Tersembunyi jika produk sedikit */
    </style>
</head>
<body class="bg-light">

<div class="container text-center py-4">
    <div class="d-flex justify-content-center mb-4">
        <div style="width: 180px; height: 180px;">
            <img src="img/butang.png" class="img-fluid rounded-circle border border-3 shadow" style="width:100%; height:100%; object-fit:cover;" onerror="this.src='https://placehold.co/200x200?text=Logo'">
        </div>
    </div>

    <div class="row justify-content-center mb-4">
        <div class="col-md-6 col-11">
            <input type="text" id="searchInput" class="form-control rounded-pill shadow-sm" placeholder="Cari baju anak...">
        </div>
    </div>

    <div id="productGrid" class="grid-container"></div>
    <div id="no-product" class="mt-5 text-muted" style="display:none;"><h3>Produk tidak ditemukan</h3></div>

    <button id="loadMore" class="btn btn-outline-primary rounded-pill mt-4 mb-5 px-5 fw-bold">Lihat Selengkapnya</button>
</div>

<footer class="py-5 mt-5">
    <div class="container text-center">
        <div class="mb-4">
            <h5 class="fw-bold">About Me</h5>
            <p class="text-muted mx-auto" style="max-width: 500px;">
                Menyediakan berbagai jenis baju anak umur 0-10 tahun dengan kualitas terbaik dan harga terjangkau.
            </p>
        </div>
        
        <div class="mb-4">
            <h5 class="fw-bold">Sosmed</h5>
            <div class="d-flex justify-content-center gap-3 flex-wrap mt-3" id="sosmedContainer">
                </div>
        </div>

        <hr class="my-4 mx-auto" style="max-width: 80%; opacity: 0.1;">
        <p class="small text-secondary mb-0">Created by <strong>Syaiful Kamaludin</strong></p>
    </div>
</footer>

<script src="products.js"></script>
<script>
    let itemsToShow = 4; // Menampilkan 4 produk diawal
    const grid = document.getElementById('productGrid');
    const loadMoreBtn = document.getElementById('loadMore');

    function renderUI(filter = "") {
        grid.innerHTML = "";
        const filtered = allProducts.filter(p => p.name.toLowerCase().includes(filter.toLowerCase()));
        
        if (filtered.length === 0) {
            document.getElementById('no-product').style.display = "block";
            loadMoreBtn.style.display = "none";
            return;
        }

        document.getElementById('no-product').style.display = "none";
        const limit = filter === "" ? itemsToShow : filtered.length;

        filtered.slice(0, limit).forEach(p => {
            grid.innerHTML += `
                <div class="product-card p-2 shadow-sm">
                    <div style="height: 160px;" class="rounded overflow-hidden mb-2">
                        <img src="${p.images[0]}" class="w-100 h-100" style="object-fit:cover;" onerror="this.src='https://placehold.co/400x400?text=No+Photo'">
                    </div>
                    <p class="mb-1 fw-bold text-truncate" style="font-size:0.85rem;">${p.name}</p>
                    <a href="detail.html?id=${p.id}" class="btn btn-sm btn-dark w-100 rounded-pill">Lihat Detail</a>
                </div>`;
        });

        // Logika tampilkan tombol "Lihat Selengkapnya"
        if (filter === "" && itemsToShow < filtered.length) {
            loadMoreBtn.style.display = "inline-block";
        } else {
            loadMoreBtn.style.display = "none";
        }
    }

    // FUNGSI RENDER SOSMED (Agar ikon muncul)
    function renderSosmed() {
        const container = document.getElementById('sosmedContainer');
        const iconMapping = {
            instagram: "fa-brands fa-instagram",
            youtube: "fa-brands fa-youtube",
            tiktok: "fa-brands fa-tiktok",
            pinterest: "fa-brands fa-pinterest",
            facebook: "fa-brands fa-facebook",
            whatsapp: "fa-brands fa-whatsapp"
        };

        Object.keys(sosmedLinks).forEach(key => {
            container.innerHTML += `
                <a href="${sosmedLinks[key]}" target="_blank" class="sosmed-icon">
                    <i class="${iconMapping[key]}"></i>
                </a>`;
        });
    }

    loadMoreBtn.addEventListener('click', () => { 
        itemsToShow += 4; 
        renderUI(); 
    });

    document.getElementById('searchInput').addEventListener('input', (e) => renderUI(e.target.value));

    // Jalankan pas loading
    renderUI();
    renderSosmed();
</script>
</body>
</html>